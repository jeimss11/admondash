<div class="clients-list">
  <h2>Clientes</h2>
  <section class="form-section">
    <h3>@if (editing) { Editar cliente } @else { Nuevo cliente }</h3>
    <form [formGroup]="form" (ngSubmit)="save()">
      <label>
        Nombre:
        <input formControlName="nombre" required />
      </label>
      <label>
        Dirección:
        <input formControlName="direccion" required />
      </label>
      <label>
        Teléfono:
        <input formControlName="telefono" required />
      </label>
      <label>
        Nombre de la empresa:
        <input formControlName="local" />
      </label>
      <button type="submit" [disabled]="form.invalid">
        @if (editing) { Guardar cambios } @else { Crear cliente }
      </button>
      <button type="button" (click)="startNew()" [disabled]="saving">Limpiar</button>
    </form>
  </section>
  @if (loading) {
  <div>Cargando clientes...</div>
  } @if (error) {
  <div class="error">{{ error }}</div>
  } @if (!loading && clientes.length) {
  <table>
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Dirección</th>
        <th>Teléfono</th>
        <th>Nombre negocio</th>
        <!-- <th>Última Modificación</th> -->
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      @for (c of clientes; track c.local) {
      <tr>
        <td>{{ c.cliente }}</td>
        <td>{{ c.direccion }}</td>
        <td>{{ c.telefono }}</td>
        <td>{{ c.local }}</td>
        <!-- <td>{{ c.ultima_modificacion | date : 'short' }}</td> -->
        <td>
          <button type="button" (click)="startEdit(c)">Editar</button>
          <button type="button" (click)="deleteCliente(c.local)">Eliminar</button>
        </td>
      </tr>
      }
    </tbody>
  </table>
  } @if (!loading && !clientes.length) {
  <div>No hay clientes registrados.</div>
  }
</div>
